support_the_blues = {
	major = yes
	ai_check_interval = 120
	ai_will_do = 70

	is_shown = {
		is_ruler = yes
		is_landed = yes
		is_ai = yes
		AND = {
			NOT = {has_trait = blue_support}
			NOT = {has_trait = green_support}
		}
		has_government = imperial_government
	}

	effect = {
		add_trait = blue_support
	}
}

support_the_greens = {
	major = yes
	ai_check_interval = 120
	ai_will_do = 70

	is_shown = {
		is_ruler = yes
		is_landed = yes
		is_ai = yes
		AND = {
			NOT = {has_trait = blue_support}
			NOT = {has_trait = green_support}
		}
		has_government = imperial_government
	}

	effect = {
		add_trait = green_support

	}
}

zakah_dev_realm = {
	major = yes
	ai_check_interval = 120
	ai_will_do = 70

	is_shown = {
		is_ruler = yes
		is_landed = yes
		is_ai = yes
		exists = var:zakah_balance
		var:zakah_balance.compare_value >= 500
	}

	effect = {
		change_variable = {
			name = zakah_balance
			subtract = 500
		}

		set_variable = {
			name = dev_zakah_tmp_count
			value = 50
		}
		change_variable = {
			name = dev_zakah_tmp_count
			divide = realm_size
		}
		every_realm_county = {
			change_development_level = root.var:dev_zakah_tmp_count
		}
	}
}

zakah_opinion_realm = {
	major = yes
	ai_check_interval = 120
	ai_will_do = 70

	is_shown = {
		is_ruler = yes
		is_landed = yes
		is_ai = yes
		exists = var:zakah_balance
		var:zakah_balance.compare_value >= 200
	}

	effect = {
		change_variable = {
			name = zakah_balance
			subtract = 200
		}

		every_realm_county = {
			add_county_modifier = opinion_zakah
		}
		
	}
}

zakah_dev_all = {
	major = yes
	ai_check_interval = 120
	ai_will_do = 70

	is_shown = {
		is_ruler = yes
		is_landed = yes
		is_ai = yes
		exists = var:zakah_balance
		var:zakah_balance.compare_value >= 1500
	}

	effect = {
		change_variable = {
			name = zakah_balance
			subtract = 1500
		}

		set_variable = {
			name = dev_zakah_tmp_count
			value = 75
		}
		set_variable = {
			name = faith_counties
			value = 0
		}
		hidden_effect = {
			every_county = {
				limit = {
					faith = root.faith
				}
				root = {
					change_variable = {
						name = faith_counties
						add = 1
					}
				}
			}
			change_variable = {
				name = dev_zakah_tmp_count
				divide = var:faith_counties
			}
			every_county = {
				limit = {
					faith = root.faith
				}
				change_development_level = root.var:dev_zakah_tmp_count
			}
		}
		
	}
}

zakah_modifier_supply = {
	major = yes
	ai_check_interval = 120
	ai_will_do = 70

	is_shown = {
		is_ruler = yes
		is_landed = yes
		is_ai = yes
		exists = var:zakah_balance
		var:zakah_balance.compare_value >= 1500
	}

	effect = {
		change_variable = {
			name = zakah_balance
			subtract = 1500
		}

		every_realm_province = {
			add_province_modifier = zakah_modifier_supply
		}
	}
}

zakah_modifier_dev = {
	major = yes
	ai_check_interval = 120
	ai_will_do = 70

	is_shown = {
		is_ruler = yes
		is_landed = yes
		is_ai = yes
		exists = var:zakah_balance
		var:zakah_balance.compare_value >= 1500
	}

	effect = {
		change_variable = {
			name = zakah_balance
			subtract = 1500
		}

		every_realm_county = {
			add_county_modifier = zakah_modifier_dev
		}
	}
}