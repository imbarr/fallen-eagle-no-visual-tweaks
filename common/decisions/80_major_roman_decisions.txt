### EK EDIT: Disallowed a few decisions

#Restoring the Legit Roman Empire
restore_roman_empire_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_dynasty_house.dds"

	desc = restore_roman_empire_decision_desc
	selection_tooltip = restore_roman_empire_decision_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		is_ruler = yes
		is_landed = yes
		has_title = title:e_italy
		
		NOT = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_restored_roman_empire
			}
		}
		OR = {
			has_government = feudal_government
			has_government = republic_government
			has_government = clan_government
		}
	}

	is_valid = {
		prestige_level >= max_prestige_level

		custom_description = {
			text = restore_roman_empire_decision_tt
			OR = {
				religion = religion:christianity_religion
				religion = religion:hellenism_religion
				culture = culture:roman
			}
		}

		completely_controls = title:d_latium
		completely_controls = title:d_venice
		completely_controls = title:d_romagna
		completely_controls = title:d_sicily
		completely_controls = title:d_genoa
		completely_controls = title:d_capua
		completely_controls = title:d_apulia
		completely_controls = title:d_thrace
		completely_controls = title:d_antioch
		completely_controls = title:d_palestine
		completely_controls = title:d_alexandria
		completely_controls = title:d_athens
		completely_controls = title:d_tunis
		completely_controls = title:d_croatia
		completely_controls = title:d_thessalonika
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
	}

	effect = {
		custom_tooltip = restore_roman_empire_decision_effect_tooltip
		show_as_tooltip = {
			create_roman_empire_scripted_effect = yes
		}
		trigger_event = {
			id = roman_restoration.0001
		}
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_restored_roman_empire
			}
			set_global_variable = {
				name = flag_restored_roman_empire
				value = root
			}
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

#Restoring the Poser Roman Empire (as HRE)
restore_roman_empire_holy_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_dynasty_house.dds"

	desc = restore_roman_empire_holy_decision_desc
	selection_tooltip = restore_roman_empire_decision_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		is_ruler = yes
		is_landed = yes
		has_title = title:e_hre
		NOT = { has_title = title:e_byzantium } #Prioritize the real one.
		NOT = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_restored_roman_empire
			}
		}
		OR = {
			has_government = feudal_government
			has_government = republic_government
			has_government = clan_government
		}
	}

	is_valid = {
		prestige_level >= max_prestige_level
		completely_controls = title:d_latium
		completely_controls = title:d_venice
		completely_controls = title:d_romagna
		completely_controls = title:d_sicily
		completely_controls = title:d_genoa
		completely_controls = title:d_capua
		completely_controls = title:d_apulia
		completely_controls = title:d_thrace
		completely_controls = title:d_antioch
		completely_controls = title:d_palestine
		completely_controls = title:d_alexandria
		completely_controls = title:d_athens
		completely_controls = title:d_tunis
		completely_controls = title:d_croatia
		completely_controls = title:d_thessalonika
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
		faith.religion = faith:catholic.religion #Christian Only
	}

	effect = {
		custom_tooltip = restore_roman_empire_decision_effect_tooltip
		show_as_tooltip = {
			create_roman_empire_holy_scripted_effect = yes
		}
		trigger_event = {
			id = roman_restoration.0003
		}
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_restored_roman_empire
			}
			set_global_variable = {
				name = flag_restored_roman_empire
				value = root
			}
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

#Restoring the Poser Roman Empire (as Italia)
restore_roman_empire_italian_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_dynasty_house.dds"

	desc = restore_roman_empire_italian_decision_desc
	selection_tooltip = restore_roman_empire_decision_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		is_ruler = yes
		is_landed = yes
		has_title = title:e_italy
		NOT = { has_title = title:e_byzantium } #Prioritize the real one.
		NOT = { has_title = title:e_hre } #And the second fiddle.
		NOT = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_restored_roman_empire
			}
		}
		OR = {
			culture = { has_cultural_pillar = heritage_latin }
		}
		is_target_in_global_variable_list = { #Only available after unifying Italy.
			name = unavailable_unique_decisions
			target = flag:flag_unified_italian_empire
		}
		OR = {
			has_government = feudal_government
			has_government = republic_government
			has_government = clan_government
		}
	}

	is_valid = {
		prestige_level >= max_prestige_level

		custom_description = {
			text = restore_roman_empire_decision_tt
			OR = {
				religion = religion:christianity_religion
				religion = religion:hellenism_religion
				culture = culture:roman
			}
		}
		
		completely_controls = title:d_latium
		completely_controls = title:d_venice
		completely_controls = title:d_romagna
		completely_controls = title:d_sicily
		completely_controls = title:d_genoa
		completely_controls = title:d_capua
		completely_controls = title:d_apulia
		completely_controls = title:d_thrace
		completely_controls = title:d_antioch
		completely_controls = title:d_palestine
		completely_controls = title:d_alexandria
		completely_controls = title:d_athens
		completely_controls = title:d_tunis
		completely_controls = title:d_croatia
		completely_controls = title:d_thessalonika
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
		OR = {
			faith.religion = faith:catholic.religion #Either Christian
			faith.religion = faith:hellenic_pagan.religion #Or Hellenic
			culture = culture:roman
		}
	}

	effect = {
		custom_tooltip = restore_roman_empire_decision_effect_tooltip
		show_as_tooltip = {
			create_roman_empire_italy_scripted_effect = yes
		}
		trigger_event = {
			id = roman_restoration.0150
		}
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_restored_roman_empire
			}
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

mend_the_great_schism_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_major_religion.dds"

	desc = mend_the_great_schism_decision_desc
	selection_tooltip = mend_the_great_schism_decision_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		### TFE EDIT: It's a bit too early for that, as the Church is still mostly united
		always = no
		
		is_ruler = yes
		is_landed = yes
		faith.religion = faith:catholic.religion #Christian Only
		NOT = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_mended_great_schism
			}
		}
		highest_held_title_tier > 4 #Only Emperors
	}

	is_valid = {
		piety_level >= max_piety_level
		completely_controls = title:c_byzantion
		completely_controls = title:c_antiocheia
		completely_controls = title:c_jerusalem
		completely_controls = title:c_alexandria
		completely_controls = title:c_roma
		custom_description = {
			text = "mend_schism_byzantion_bishop"
			title:c_byzantion.holder.faith = root.faith  #Either own County directly, or have a vassal of same religion.
		}
		custom_description = {
			text = "mend_schism_antiocheia_bishop"
			title:c_antiocheia.holder.faith = root.faith #Either own County directly, or have a vassal of same religion.
		}
		custom_description = {
			text = "mend_schism_jerusalem_bishop"
			title:c_jerusalem.holder.faith = root.faith #Either own County directly, or have a vassal of same religion.
		}
		custom_description = {
			text = "mend_schism_alexandria_bishop"
			title:c_alexandria.holder.faith = root.faith #Either own County directly, or have a vassal of same religion.
		}
		custom_description = {
			text = "mend_schism_roma_bishop"
			title:c_roma.holder.faith = root.faith #Either own County directly, or have a vassal of same religion.
		}
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
	}

	effect = {
		custom_tooltip = mend_the_great_schism_decision_effect_tooltip
		show_as_tooltip = {
			mend_great_schism_scripted_effect = yes
		}
		trigger_event = roman_restoration.0100
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_mended_great_schism
			}
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

set_capital_constantinople_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_destiny_goal.dds"

	desc = set_capital_constantinople_decision_desc
	selection_tooltip = set_capital_constantinople_decision_tooltip
	major = yes

	ai_check_interval = 12

	is_shown = {
		is_ruler = yes
		is_landed = yes
		has_title = title:e_byzantium
		NOT = { capital_county = { this = title:c_byzantion } }
		OR = {
			title:c_byzantion.holder = { 	
				any_liege_or_above = { this = root }
			}
			title:c_byzantion.holder = { this = root }
		}
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
	}

	effect = {
		if = { #Usurp if not held personally.
			limit = {
				NOT = { title:c_byzantion.holder = { this = root } }
			}
			title:c_byzantion.holder = { save_scope_as = target_for_denunciation }
			create_title_and_vassal_change = {
				type = returned
				save_scope_as = change
				add_claim_on_loss = no
			}
			title:c_byzantion = {
				change_title_holder = {
					holder = root
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change

		}
		set_realm_capital = title:c_byzantion
		if = {
			limit = {
				exists = scope:target_for_denunciation
			}
			scope:target_for_denunciation = {
				trigger_event = {
					id = roman_restoration.1204
				}
			}
		}
	}
	
	ai_potential = {
		primary_title.tier = tier_empire
		has_title = title:e_byzantium
	}

	ai_will_do = { #Do it always, for coherence.
		base = 100
		modifier = {
			title:c_byzantion.holder = {
				any_realm_county = {
					count < 2
					holder = title:c_byzantion.holder
				}
			}
			factor = 0
		}
	}
}

set_capital_rome_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_destiny_goal.dds"

	desc = set_capital_rome_decision_desc
	selection_tooltip = set_capital_rome_decision_tooltip
	major = yes

	ai_check_interval = 12

	is_shown = {
		is_ruler = yes
		is_landed = yes
		has_title = title:e_roman_empire
		NOT = { capital_county = { this = title:c_roma } }
		OR = {
			title:c_roma.holder = { 	
				any_liege_or_above = { this = root }
			}
			title:c_roma.holder = { this = root }
		}
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
	}

	effect = {
		if = { #Usurp if not held personally.
			limit = {
				NOT = { title:c_roma.holder = { this = root } }
			}
			create_title_and_vassal_change = {
				type = returned
				save_scope_as = change
				add_claim_on_loss = no
			}
			title:c_roma = {
				change_title_holder = {
					holder = root
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change

		}
		set_realm_capital = title:c_roma
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = { #Do it always, for coherence.
		base = 100
	}
}

establish_iconoclast_patriarchate_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_major_religion.dds"

	desc = establish_iconoclast_patriarchate_decision_desc
	selection_tooltip = establish_iconoclast_patriarchate_decision_tooltip
	major = yes

	ai_check_interval = 60

	is_shown = {
		is_ruler = yes
		is_landed = yes
		faith = faith:iconoclast
		NOT = { faith = { exists = religious_head } }
		highest_held_title_tier > 3 #Only Kings and Emperors
	}

	is_valid = {
		completely_controls = title:c_byzantion
		piety_level >= medium_piety_level
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
	}

	effect = {
		custom_tooltip = establish_iconoclast_patriarchate_decision_effect_tooltip
		trigger_event = {
			id = roman_restoration.0120
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
		ai_value_modifier = {
			ai_zeal = 5.0
		}
		modifier = {
			factor = 0
			has_trait = cynical
		}
	}
}

restore_ecumenical_patriarchate_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_major_religion.dds"

	desc = restore_ecumenical_patriarchate_decision_desc
	selection_tooltip = restore_ecumenical_patriarchate_decision_tooltip
	major = yes

	ai_check_interval = 60

	is_shown = {
		is_ruler = yes
		is_landed = yes
		faith = faith:orthodox
		NOT = { faith = { exists = religious_head } }
		highest_held_title_tier > 3 #Only Kings and Emperors
	}

	is_valid = {
		completely_controls = title:c_byzantion
		piety_level >= medium_piety_level
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
	}

	effect = {
		custom_tooltip = restore_ecumenical_patriarchate_decision_effect_tooltip
		trigger_event = {
			id = roman_restoration.0122
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
		ai_value_modifier = {
			ai_zeal = 5.0
		}
		modifier = {
			factor = 0
			has_trait = cynical
		}
	}
}

restore_papacy_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_major_religion.dds"

	desc = restore_papacy_decision_desc
	selection_tooltip = restore_papacy_decision_tooltip
	major = yes

	ai_check_interval = 12

	is_shown = {
		is_ruler = yes
		is_landed = yes
		faith = faith:catholic
		NOT = { faith = { exists = religious_head } }
		highest_held_title_tier > 3 #Only Kings and Emperors
	}

	is_valid = {
		completely_controls = title:c_roma
		completely_controls = title:d_latium
		completely_controls = title:d_spoleto
		completely_controls = title:d_ancona
		completely_controls = title:d_romagna
		piety_level >= high_piety_level
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
	}

	effect = {
		custom_tooltip = restore_papacy_decision_effect_tooltip
		show_as_tooltip = {
			restore_papacy_scripted_effect = yes
		}
		trigger_event = {
			id = roman_restoration.0124
		}
	}
	
	ai_potential = {
		faith = faith:catholic
		highest_held_title_tier > 3 #Only Kings and Emperors
		NOT = { faith = { exists = religious_head } }
	}

	ai_will_do = { #Always do it when possible.
		base = 100
		ai_value_modifier = {
			ai_zeal = 1.0
		}
		modifier = {
			factor = 0
			has_trait = cynical
		}
	}
}

restore_pope_in_rome_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_major_religion.dds"

	desc = restore_pope_in_rome_decision_desc
	selection_tooltip = restore_pope_in_rome_decision_tooltip
	major = yes

	ai_check_interval = 12

	is_shown = {
		is_ruler = yes
		is_landed = yes
		faith = faith:catholic
		NOR = {
			has_title = title:k_papal_state
			has_title = title:e_roman_empire #Priorities
		}
		NOT = { title:c_roma.holder = { has_title = title:k_papal_state } }
		NOT = { capital_county = { this = title:c_roma } }
		title:k_papal_state.holder = {
			NOT = { 	
				has_opinion_modifier = { #Not accepting it if you conquered it yourself.
					target = root
					modifier = declared_war
				}
			}
			NOT = { 	
				has_opinion_modifier = { #Not accepting it if you conquered it yourself.
					target = root
					modifier = revoked_title
				}
			}
		}
		NOT = { has_character_flag = flag_already_given_rome_once }
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
		highest_held_title_tier > 3 #Only Kings and Emperors
		custom_tooltip = {
			text = hof_exists_tt
			faith = { exists = religious_head }
		}
		custom_tooltip = {
			text = rome_held_by_you_or_vassal_tt
			OR = {
				title:c_roma.holder = { 	
					any_liege_or_above = { this = root }
				}
				title:c_roma.holder = { this = root }
			}
		}
	}

	effect = {
		add_piety = 1000
		add_character_flag = flag_already_given_rome_once
		create_title_and_vassal_change = {
			type = returned
			save_scope_as = change
			add_claim_on_loss = no
		}
		title:c_roma = {
			change_title_holder = {
				holder = title:k_papal_state.holder
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change

		title:k_papal_state.holder = {
			set_realm_capital = title:c_roma
			add_opinion = {
				target = prev
				modifier = restored_papacy_opinion
			}
		}
	}
	
	ai_potential = {
		faith = faith:catholic
		highest_held_title_tier > 3 #Only Kings and Emperors
	}

	ai_will_do = { #Do it always, for coherence.
		base = 100
		modifier = {
			factor = 0
			title:c_roma.holder = {
				OR = {
					is_ai = no
					any_liege_or_above = { is_ai = no }  # AI will never take Rome province away from a player.
				}
			}
		}
		modifier = {
			factor = 0
			has_trait = cynical
		}
		modifier = {
			factor = 0
			has_title = title:e_italy
		}
	}
}

dismantle_papacy_decision = { #For Muslims and Pagans.
	picture = "gfx/interface/illustrations/decisions/decision_major_religion.dds"

	desc = dismantle_papacy_decision_desc
	selection_tooltip = dismantle_papacy_decision_tooltip
	major = yes

	ai_check_interval = 60

	is_shown = {
		is_ruler = yes
		is_landed = yes
		faith:catholic = {
			has_doctrine = doctrine_spiritual_head
		}
		OR = { #Must have historical grudge with Christianity
			faith.religion = faith:hellenic_pagan.religion
			faith.religion = faith:sunni.religion
			faith.religion = faith:norse_pagan.religion
			faith.religion = faith:slavic_pagan.religion
			faith.religion = faith:baltic_pagan.religion
		}
		highest_held_title_tier > 3 #Only Kings and Emperors
		capital_province = { #Indians could not possibly care...
			OR = {
				geographical_region = world_europe
				geographical_region = world_middle_east
				geographical_region = world_africa_north
			}
		}
	}

	is_valid = {
		trigger_if = {
			limit = {
				exists = title:k_papal_state.holder
			}
			title:k_papal_state.holder = { is_landed = no } #If he fled elsewhere, it cannot be done, the Pope must be landless.
			title:k_papal_state.holder = { is_at_war = no } #Shouldn't be possible during a Crusade
		}
		completely_controls_region = world_europe_south_italy
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
	}

	effect = {
		custom_tooltip = dismantle_papacy_decision_effect_tooltip
		show_as_tooltip = {
			destroy_papacy_scripted_effect = yes
		}
		trigger_event = {
			id = roman_restoration.0130
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = { #Do it always.
		base = 100
	}
}

#Uniting Italy
unify_italian_empire_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_dynasty_house.dds"

	desc = unify_italian_empire_decision_desc
	selection_tooltip = unify_italian_empire_decision_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		culture = { has_cultural_pillar = heritage_latin }
		is_ruler = yes
		is_landed = yes
		highest_held_title_tier > 2 #Dukes and above
		capital_province = { geographical_region = world_europe_south_italy }
		NOT = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_unified_italian_empire
			}
		}
		NOT = {  #Too late.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_restored_roman_empire
			}
		}
		NOT = {  #Too late.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_reformed_carolingian_empire
			}
		}
	}

	is_valid = {
		prestige_level >= very_high_prestige_level
		has_title = title:e_italy
		#All the Peninsula
		completely_controls_region = world_europe_south_italy
		#And Illyria
		completely_controls_region = custom_roman_illyricum
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
		is_at_war = no
	}

	effect = {
		custom_tooltip = unify_italian_empire_decision_effect_tooltip
		trigger_event = {
			id = roman_restoration.0140
		}
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_unified_italian_empire
			}
			set_global_variable = {
				name = flag_unified_italian_empire
				value = root
			}
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

#Roman Empires showdown decision.
dismantle_holy_pretender_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_realm.dds"

	desc = dismantle_holy_pretender_decision_desc
	selection_tooltip = dismantle_holy_pretender_decision_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		exists = title:e_hre.holder #Must exist in the first place...
		NOT = {
			root = title:e_hre.holder #That'd be awkward...
		}
		OR = {
			culture = { has_cultural_pillar = heritage_byzantine }
			culture = { has_cultural_pillar = heritage_latin }
			culture = { has_cultural_pillar = heritage_hellenistic }
		}
		is_ruler = yes
		is_landed = yes
		OR = {
			has_title = title:e_roman_empire
			has_title = title:e_byzantium
		}
		NOT = { #Once an Emperor throws the challenge, he has only one chance to dismantle the Empire.
			has_character_flag = flag_emperor_challenging_hre #Applied below.
		}
	}

	is_valid = {
		prestige_level >= max_prestige_level
		#All the Italian Peninsula
		completely_controls_region = world_europe_south_italy
		#And Lotharingia (the Rhine).
		completely_controls = title:d_luxembourg
		completely_controls = title:d_brabant
		completely_controls = title:d_julich
		completely_controls = title:d_upper_lorraine
		completely_controls = title:d_lower_lorraine
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
		is_at_war = no
	}

	cost = {
		prestige = 2000
	}

	effect = {
		custom_tooltip = dismantle_holy_pretender_decision_effect_tooltip
		trigger_event = {
			id = roman_restoration.0160
		}
	}
	
	ai_potential = {
		has_trait = ambitious
	}

	ai_will_do = {
		base = 100
	}
}

dismantle_byz_pretender_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_realm.dds"

	desc = dismantle_byz_pretender_decision_desc
	selection_tooltip = dismantle_byz_pretender_decision_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		exists = title:e_byzantium.holder #Must exist in the first place...
		NOT = {
			root = title:e_byzantium.holder #That'd be awkward...
		}
		OR = {
			culture = { has_cultural_pillar = heritage_frankish }
			culture = { has_cultural_pillar = heritage_central_germanic }
			culture = { has_cultural_pillar = heritage_latin }
		}
		is_ruler = yes
		is_landed = yes
		OR = {
			has_title = title:e_roman_empire
			has_title = title:e_hre
		}
		NOT = { #Once an Emperor throws the challenge, he has only one chance to dismantle the Empire.
			has_character_flag = flag_emperor_challenging_byz #Applied below.
		}
	}

	is_valid = {
		prestige_level >= max_prestige_level
		#All the Italian Peninsula
		completely_controls_region = world_europe_south_italy
		#And Epirus/Hellas (Greek foothold).
		completely_controls = title:d_dyrrachion
		completely_controls = title:d_cephalonia
		completely_controls = title:d_epirus
		completely_controls = title:d_athens
		completely_controls = title:d_achaia
	}
	
	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
		is_at_war = no
	}

	cost = {
		prestige = 2000
	}

	effect = {
		custom_tooltip = dismantle_byz_pretender_decision_effect_tooltip
		trigger_event = {
			id = roman_restoration.0170
		}
	}
	
	ai_potential = {
		has_trait = ambitious
	}

	ai_will_do = {
		base = 100
	}
}


######################  Abandon Britannia
abandon_britannia_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_britannia_abandon.dds"

	desc = abandon_britannia_decision_desc
	selection_tooltip = abandon_britannia_decision_tooltip
	major = yes

	ai_check_interval = 300

	is_shown = {
		is_ruler = yes
		is_landed = yes
		OR = {
			has_title = title:e_roman_empire
			has_title = title:e_western_roman_empire
		}
		any_vassal = {
			has_title = title:k_britannia
		}
		
		NOT = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_abandoned_britannia
			}
		}
		has_government = imperial_government
	}

	is_valid = {
		prestige_level >= low_prestige_level

		OR = {
			religion = religion:christianity_religion
			religion = religion:hellenism_religion
			culture =  culture:roman
		}
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_independent_ruler = yes
	}
	
	cost = {
		prestige = 750
	}
	
	effect = {
		custom_tooltip = abandon_britannia_decision_effect_tooltip
		trigger_event = {
			id = western_roman.0001
		}
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_abandoned_britannia
			}
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 70
	}
}

#Create the Province of Caledonia
create_the_province_of_caledonia_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_caledonia.dds"

	desc = create_the_province_of_caledonia_decision_desc
	selection_tooltip = create_the_province_of_caledonia_decision_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		is_ruler = yes
		is_landed = yes
		OR = {
		has_title = title:e_byzantium
		has_title = title:e_western_roman_empire
		has_title = title:e_roman_empire
	}
		NOT = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:created_province_of_caledonia
			}
		}
		
	}

	is_valid = {
		prestige_level >= medium_prestige_level

		OR = {
			religion = religion:christianity_religion
			religion = religion:hellenism_religion
			culture = culture:roman
		}

		completely_controls = title:d_albany
		completely_controls = title:d_the_isles
		completely_controls = title:d_western_isles
		completely_controls = title:d_moray
		
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
	}

	effect = {
		create_title_and_vassal_change = {
			type = created
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		title:d_caledonia = {
			save_scope_as = title_d_caledonia
		}
		title:d_caledonia = {
			change_title_holder = {
				holder = root
				change = scope:title_change
			}
			save_scope_as = title_d_caledonia
		}
		resolve_title_and_vassal_change = scope:title_change

		trigger_event = {
			id = province_events.0001
		}
		hidden_effect = {
			title:c_fife = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_gowrie = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_atholl = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_angus = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_mearns = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_buchan = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_moray = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_inverness = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_argyll = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_ross = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_sutherland = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_caithness = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_outer_hebrides = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_inner_hebrides = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_lennox = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:c_strathearn = {
				set_de_jure_liege_title = title:d_caledonia	
			}
			title:c_isle_of_man = {
				set_de_jure_liege_title = title:d_caledonia
			}
			title:d_caledonia = {
				set_de_jure_liege_title = title:k_scotland
			}
			title:k_scotland = {
				set_de_jure_liege_title = root.primary_title
			}
				
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:created_province_of_caledonia
			}
		}
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}




#Create the Province of Hibernia
create_the_province_of_hibernia_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_hibernia.dds"

	desc = create_the_province_of_hibernia_decision_desc
	selection_tooltip = create_the_province_of_hibernia_decision_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		is_ruler = yes
		is_landed = yes
		OR = {
			has_title = title:e_byzantium
			has_title = title:e_western_roman_empire
			has_title = title:e_roman_empire
		}
		NOT = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:created_province_of_hibernia
			}
		}
		
	}

	is_valid = {
		prestige_level >= medium_prestige_level

		OR = {
			religion = religion:christianity_religion
			religion = religion:hellenism_religion
			culture = culture:roman
		}

		completely_controls = title:d_meath
		completely_controls = title:d_ulster
		completely_controls = title:d_connacht
		completely_controls = title:d_leinster
		completely_controls = title:d_munster
		
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
	}

	effect = {
		create_title_and_vassal_change = {
			type = created
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		title:d_hibernia = {
			save_scope_as = title_d_hibernia
		}
		title:d_hibernia = {
			change_title_holder = {
				holder = root
				change = scope:title_change
			}
			save_scope_as = title_d_hibernia
		}
		resolve_title_and_vassal_change = scope:title_change
		
		trigger_event = {
			id = province_events.0002
		}
		hidden_effect = {
			title:c_ulster = {
				set_de_jure_liege_title = title:d_hibernia
			}
			title:c_oriel = {
				set_de_jure_liege_title = title:d_hibernia
			}
			title:c_ailech = {
				set_de_jure_liege_title = title:d_hibernia
			}
			title:c_connacht = {
				set_de_jure_liege_title = title:d_hibernia
			}
			title:c_breifne = {
				set_de_jure_liege_title = title:d_hibernia
			}
			title:c_athlone = {
				set_de_jure_liege_title = title:d_hibernia
			}
			title:c_dublin = {
				set_de_jure_liege_title = title:d_hibernia
			}
			title:c_leinster = {
				set_de_jure_liege_title = title:d_hibernia
			}
			title:c_ossory = {
				set_de_jure_liege_title = title:d_hibernia
			}
			title:c_ormond = {
				set_de_jure_liege_title = title:d_hibernia
			}
			title:c_thomond = {
				set_de_jure_liege_title = title:d_hibernia
			}
			title:c_desmond = {
				set_de_jure_liege_title = title:d_hibernia
			}
			title:d_hibernia = {
				set_de_jure_liege_title = title:k_ireland
			}
			title:k_ireland = {
				set_de_jure_liege_title = root.primary_title
			}
			

			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:created_province_of_hibernia
			}
		}
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}


#Reclaim the Diocese of Britannia
reclaim_the_diocese_of_britannia = {
	picture = "gfx/interface/illustrations/decisions/decision_destiny_goal.dds"

	desc = reclaim_the_diocese_of_britannia_decision_desc
	selection_tooltip = reclaim_the_diocese_of_britannia_decision_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		is_ruler = yes
		is_landed = yes
		is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:flag_abandoned_britannia
		}
		OR = {
			has_title = title:e_byzantium
			has_title = title:e_western_roman_empire
			has_title = title:e_roman_empire
		}
		NOT = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:britannia_reclaimed
			}
		}
		
	}

	is_valid = {
		prestige_level >= medium_prestige_level

		OR = {
			religion = religion:christianity_religion
			religion = religion:hellenism_religion
			culture = culture:roman
		}
		completely_controls_region = custom_reclaim_britannia

		
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_independent_ruler = yes
	}

	effect = {
		create_title_and_vassal_change = {
			type = created
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		title:k_britannia = {
			save_scope_as = title_k_britannia
		}
		title:k_britannia = {
			change_title_holder = {
				holder = root
				change = scope:title_change
			}
			save_scope_as = title_k_britannia
		}
		resolve_title_and_vassal_change = scope:title_change
		
		trigger_event = {
			id = province_events.0003
		}
		add_prestige = 1500
		hidden_effect = {
			title:e_western_roman_empire = {
				every_in_de_jure_hierarchy = {
				limit = {
				  tier = tier_kingdom
				}
				set_de_jure_liege_title = title:e_roman_empire
			  }
			}

			title:e_byzantium = {
				every_in_de_jure_hierarchy = {
				limit = {
				  tier = tier_kingdom
				}
				set_de_jure_liege_title = title:e_roman_empire
			  }
			}
			
			
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:britannia_reclaimed
			}
		}
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

#Form Rome
form_rome_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_reunite_rome.dds"
	desc = form_rome_decision_desc
	selection_tooltip = form_rome_decision_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		is_ruler = yes
		is_landed = yes
		OR = {
			has_title = title:e_byzantium
			has_title = title:e_western_roman_empire
		}
		NOT = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:formed_rome
			}
		}
		
	}

	is_valid = {
		prestige_level >= high_prestige_level

		OR = {
			religion = religion:christianity_religion
			religion = religion:hellenism_religion
			culture = culture:roman
		}

		completely_controls = title:d_barcelona
		completely_controls = title:d_valois
		completely_controls = title:d_thrace
		completely_controls = title:d_alexandria
		completely_controls = title:d_tunis
		completely_controls = title:d_sevilla
		completely_controls = title:d_antioch
		completely_controls = title:d_achaia
		completely_controls = title:d_latium
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_independent_ruler = yes
	}

	effect = {
		create_title_and_vassal_change = {
			type = created
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		title:e_roman_empire = {
			save_scope_as = title_e_roman_empire
		}
		title:e_roman_empire = {
			change_title_holder = {
				holder = root
				change = scope:title_change
			}
			save_scope_as = title_e_roman_empire
		}
		resolve_title_and_vassal_change = scope:title_change
		
		trigger_event = {
			id = province_events.0056
		}

		add_prestige = 1500
		give_nickname = nick_restitutor_orbis
		add_trait = augustus
		destroy_title = title:e_byzantium
		destroy_title = title:e_western_roman_empire
		hidden_effect = {
			title:e_byzantium = {
				every_in_de_jure_hierarchy = {
					limit = {
						tier = tier_kingdom
					}
					set_de_jure_liege_title = title:e_roman_empire
				}
			}
			title:e_western_roman_empire = {
				every_in_de_jure_hierarchy = {
					limit = {
						tier = tier_kingdom
					}
					set_de_jure_liege_title = title:e_roman_empire
				}
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:formed_rome
			}
		}
	}

	ai_potential = {
		always = yes
	}

	cost = {
		gold = 1000
	}

	ai_will_do = {
		base = 100
	}
}

#something epic will happen below this, i'm sure

#something epic is indeed happening
#Restore the Praetorian Guard - Hróðvitnir + Wrench
restore_praetorian_guard_decision = {
	picture = "gfx/interface/illustrations/legion_bg_thin.dds"
	desc = restore_praetorian_guard_decision_desc
	ai_check_interval = 60
	selection_tooltip = restore_praetorian_guard_decision_tooltip
	major = yes
	
	is_shown = {
		is_landed = yes
		exists = dynasty
		OR = {
			culture = { has_cultural_pillar = heritage_latin }
			has_culture = culture:greek
		}
		any_held_title = {
			tier = tier_county
			title_province = {
				OR = {
					geographical_region = custom_roman_full_borders
				}
			}
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_restored_praetorian_guard
			}
		}
		title:c_viterbo = {
			NOT = {
				has_variable = prae_guard
			}
		}
		completely_controls = title:c_viterbo
	}
	
	is_valid = {
		is_independent_ruler = yes
		prestige_level >= high_prestige_level
		OR = {
			has_title = title:e_byzantium
			has_title = title:e_western_roman_empire
			has_title = title:e_roman_empire
		}
	}

	is_valid_showing_failures_only = {
		is_independent_ruler = yes
		is_at_war = no
	}
	
	effect = {
		create_character = {
			culture = root.culture
			gender = male
			dynasty = generate
			faith = root.faith
			location = root.capital_province
			save_scope_as = legion_holder
		}
		create_title_and_vassal_change = {
			type = created
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		title:c_viterbo = {
			change_title_holder = {
				holder = scope:legion_holder
				change = scope:title_change
			}
		}
		resolve_title_and_vassal_change = scope:title_change

		create_title_and_vassal_change = {
			type = created
			save_scope_as = change
			add_claim_on_loss = no
		}
		hidden_effect = {
			scope:legion_holder = {
				change_liege = {
					liege = root
					change = scope:change
				}
				change_government = legion_government
			}
		}
		resolve_title_and_vassal_change = scope:change

		title:c_viterbo = {
			save_temporary_scope_as = new_legion_tmp
			PREV = {
				add_to_variable_list = {
					name = legion_counties
					target = scope:new_legion_tmp
				}
				remove_list_variable = {
					name = legion_county_available
					target = scope:new_legion_tmp
				}

			}
			set_variable = {
				name = prae_guard
				value = yes
			}
		}
		trigger_event = {
			id = province_events.0007
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
	
	cost = {
		gold = 2500
	}
}

overthrow_the_emperor = {
	picture = "gfx/interface/illustrations/decisions/decision_invite_knights.dds"

	desc = overthrow_the_emperor_desc
	selection_tooltip = overthrow_the_emperor_tooltip
	major = yes

	ai_check_interval = 300

	cooldown = { years = 50 }

	is_shown = {
		has_government = legion_government
		has_title = title:c_viterbo
		title:c_viterbo = {
			has_variable = prae_guard
		}
		top_liege = {
			OR = {
				has_title = title:e_byzantium
				has_title = title:e_western_roman_empire
				has_title = title:e_roman_empire
			}
		}
	}

	is_valid = {
		prestige_level >= high_prestige_level

		
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
	}
	
	cost = {
		gold = 500
		prestige = 600
	}
	
	effect = {
		custom_tooltip = overthrow_the_emperor_effect_tooltip
		trigger_event = {
			id = province_events.0008
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 10
		modifier = {
			add = 10
			opinion = {
				target = top_liege
				value <= -40
			}
		}
		modifier = {
			add = 10
			opinion = {
				target = top_liege
				value <= -60
			}
		}
		modifier = {
			add = 10
			opinion = {
				target = top_liege
				value <= -80
			}
		}

	}
}

#Restore Western Rome - Hróðvitnir
restore_the_west = {
	picture = "gfx/interface/illustrations/decisions/decision_dynasty_house.dds"
	major = yes
	ai_check_interval = 60
	desc = restore_the_west_desc
	selection_tooltip = restore_the_west_tooltip

	is_shown = {
		is_landed = yes
		exists = dynasty
		OR = {
			culture = { has_cultural_pillar = heritage_latin }
		}
		#capital must be in rome
		title:e_western_roman_empire = {
			any_in_de_jure_hierarchy = {
				THIS = root.capital_county
			}
			is_title_created = no
		}
	}

	is_valid = {
		is_independent_ruler = yes
		prestige_level >= high_prestige_level
		has_government = autocratic_government
		completely_controls = title:d_latium
		completely_controls = title:d_friuli
		completely_controls = title:d_romagna
		completely_controls = title:d_sicily
		completely_controls = title:d_lombardia
		completely_controls = title:d_apulia
		completely_controls = title:d_tunis
		completely_controls = title:d_dalmatia
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
		is_at_war = no
	}

	effect = {
		save_scope_as = founder
		show_as_tooltip = { restore_the_west_effect = yes }
		trigger_event = { id = western_roman.0011 }
		#government stuff
		change_government = imperial_government
		every_vassal = {
			limit = {
				has_government = autocratic_government
			}
			change_government = imperial_government
		}
		#notify other players
		every_player = {
			limit = {
				NOT = { this = scope:founder }
			}
			#vassal players get a separate event
			if = {
				limit = {
					any_liege_or_above = { this = scope:founder }
				}
				trigger_event = western_roman.0012
			}
			#germanics get a separate event
			if = {
				limit = {
					culture = { has_cultural_pillar = heritage_north_germanic }
					culture = { has_cultural_pillar = heritage_west_germanic }
					culture = { has_cultural_pillar = heritage_east_germanic }
					culture = { has_cultural_pillar = heritage_central_germanic }
				}
				trigger_event = western_roman.0013
			}
			#slavs get a separate event
			if = {
				limit = {
					culture = { has_cultural_pillar = heritage_slavic }
					culture = { has_cultural_pillar = heritage_south_slavic }
				}
				trigger_event = western_roman.0014
			}
			#everyone else within range gets a less personal version
			else = { trigger_event = western_roman.0015 }
		}
	}

	cost = {
		gold = 1000
		prestige = 500
		piety = 500
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

#Restore Eastern Rome - Hróðvitnir
restore_the_east = {
	picture = "gfx/interface/illustrations/decisions/decision_dynasty_house.dds"
	major = yes
	ai_check_interval = 60
	desc = restore_the_east_desc
	selection_tooltip = restore_the_east_tooltip

	is_shown = {
		is_landed = yes
		exists = dynasty
		OR = {
			culture = { has_cultural_pillar = heritage_latin }
		}
		#capital must be in rome
		title:e_byzantium = {
			any_in_de_jure_hierarchy = {
				THIS = root.capital_county
			}
			is_title_created = no
		}
	}

	is_valid = {
		is_independent_ruler = yes
		prestige_level >= high_prestige_level
		has_government = autocratic_government
		completely_controls = title:d_thrace
		completely_controls = title:d_alexandria
		completely_controls = title:d_delta
		completely_controls = title:d_palestine
		completely_controls = title:d_antioch
		completely_controls = title:d_achaia
		completely_controls = title:d_krete
		completely_controls = title:d_thessalonika
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_independent_ruler = yes
		is_at_war = no
	}

	effect = {
		save_scope_as = founder
		show_as_tooltip = { restore_the_east_effect = yes }
		trigger_event = { id = eastern_roman.0001 }
		#government stuff
		change_government = imperial_government
		every_vassal = {
			limit = {
				has_government = autocratic_government
			}
			change_government = imperial_government
		}
		#notify other players
		every_player = {
			limit = {
				NOT = { this = scope:founder }
			}
			#vassal players get a separate event
			if = {
				limit = {
					any_liege_or_above = { this = scope:founder }
				}
				trigger_event = eastern_roman.0002
			}
			#germanics get a separate event
			if = {
				limit = {
					culture = { has_cultural_pillar = heritage_north_germanic }
					culture = { has_cultural_pillar = heritage_west_germanic }
					culture = { has_cultural_pillar = heritage_east_germanic }
					culture = { has_cultural_pillar = heritage_central_germanic }
				}
				trigger_event = eastern_roman.0003
			}
			#slavs get a separate event
			if = {
				limit = {
					culture = { has_cultural_pillar = heritage_slavic }
					culture = { has_cultural_pillar = heritage_south_slavic }
				}
				trigger_event = eastern_roman.0004
			}
			#everyone else within range gets a less personal version
			else = { trigger_event = eastern_roman.0005 }
		}
	}

	cost = {
		gold = 1000
		prestige = 500
		piety = 500
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}